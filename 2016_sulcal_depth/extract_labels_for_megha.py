

import numpy as np
import glob, os, re
import pickle


labels = []
path = '/neurospin/imagen/BL/processed/freesurfer/'
path_saved = os.getcwd()+'/megha/'
filename_sav = 'labels_filtered.txt'

# Create the file fist else not all information are written
thefile = open(path_saved+ filename_sav, 'wb')
thefile.close

QC_sulci_maxdepth = [u'000047102665', u'000021218872', u'000075438006', u'000025000478',
 u'000020355013', u'000079748525', u'000010400245', u'000003726191',
 u'000010111807', u'000059951813', u'000012119704', u'000048935365',
 u'000054552397', u'000099344314', u'000006507225', u'000013424686',
 u'000072819674', u'000076972990', u'000054389991', u'000012391077',
 u'000076936765', u'000049483266', u'000079815065', u'000032116540',
 u'000008337444', u'000098720163', u'000024786016', u'000090757912',
 u'000087961112', u'000040590177', u'000075233772', u'000032344228',
 u'000083539447', u'000058656168', u'000064999269', u'000007764421',
 u'000020015942', u'000073108506', u'000067467964', u'000090579038',
 u'000082205224', u'000006177246', u'000035061633', u'000082654000',
 u'000021682831', u'000054307255', u'000002109942', u'000083308215',
 u'000072914941', u'000014009454', u'000016466990', u'000033030797',
 u'000076279488', u'000007867512', u'000066457327', u'000005055175',
 u'000037005099', u'000012645188', u'000058250315', u'000072966134',
 u'000017406332', u'000063174690', u'000088315066', u'000033336692',
 u'000038622807', u'000029257136', u'000084121507', u'000079848243',
 u'000067955800', u'000043209687', u'000011104036', u'000025139569',
 u'000030383377', u'000068717425', u'000011019827', u'000052638709',
 u'000044775808', u'000098537667', u'000018750014', u'000005839877',
 u'000068802565']

for filename in glob.glob(os.path.join(path,'*')):
    m = re.search(path+'(.+?)end', filename+'end')
    if m:
        label = m.group(1)
        if '000' in label and label not in QC_sulci_maxdepth:
            labels.append(label)

#labels = np.asarray(labels)
#np.savetxt(, labels)
thefile = open(path_saved+ filename_sav, 'wb')
for item in labels:
  thefile.write("%s\n" % item)
thefile.close
#pickle.dump(labels, )  
